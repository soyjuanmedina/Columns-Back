<div class="row">
  <div class="col-lg-12 ml-auto top-30">
    <p class="lead">La calculadora de costes para Stratups te permite de modo fácil añadir grupos de
      inversiones (ej: Inmovilizado material) y añadir costes a esa inversión (ej: Reforma y
      acondicionamiento del local) para obtener un informe de tus necesidades financieras. Puedes
      empezar directamente a añadir tus inversiones, o cargar uno de nuestros ejemplos y trabajar
      sobre él, y por favor, cualquier mejora o sugerencia que tengas haznosla llegar a través de
      nuestra sección de contacto.</p>
  </div>

</div>

<div class="clearfix">
  <div class="float-right">
    <button type="button" class="btn btn-primary btn-sm" data-toggle="modal"
      data-target="#loadExampleModal">
      Cargar ejemplo <i class="fas fa-question-circle"></i>
    </button>
  </div>
</div>

<div class="container top-30">
  <!-- Contact Section Heading-->
  <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Calculadora de
    costes</h2>
  <!-- Icon Divider-->
  <div class="divider-custom">
    <div class="divider-custom-line"></div>
    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
    <div class="divider-custom-line"></div>
  </div>
  <!-- Contact Section Form-->
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="float-left" *ngIf="investments.length">
        <button type="button" class="btn btn-primary btn-sm" (click)="clearInvestments()">
          Limpiar todo
        </button>
      </div>
      <div class="float-right">
        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal"
          data-target="#addInvestmentModal">
          Añadir inversion
        </button>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-8 mx-auto">
      <form id="investmentstForm">
        <div class="card top-30" *ngFor="let investment of investments">
          <div class="card-header">
            <h5>{{investment.type}} <span (click)="deleteInvestment(investment)"><i
                  class="fas fa-trash-alt float-right text-danger"></i></span></h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-lg-12 mx-auto">
                <div class="float-right">
                  <button type="button" class="btn btn-primary btn-sm" data-toggle="modal"
                    data-target="#addCostModal" (click)="selectInvestment(investment)">
                    Añadir coste
                  </button>
                </div>
              </div>
            </div>

            <div class="form-row" *ngFor="let cost of investment.costs">
              <div class="col-md-12">
                <label [for]="cost.name">{{cost.name}}</label>
                <div class="input-group">
                  <input type="number" class="form-control" [id]="cost.name" [value]="cost.amount"
                    [(ngModel)]="cost.amount" [name]="cost.name">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="validationTooltipUsernamePrepend"
                      (click)="deleteCost(investment, cost)"><i
                        class="fas fa-trash-alt float-right text-danger"></i></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group" *ngIf="investments.length"><button
            class="btn btn-primary btn-xl top-30 btn-block" id="calculateCosts"
            (click)="calculateCosts()">Calcular</button></div>
      </form>
    </div>
  </div>
</div>


<section *ngIf="costsResult" class="page-section bg-primary text-white mb-0" id="about">
  <div class="container">
    <!-- About Section Heading-->
    <h2 class="page-section-heading text-center text-uppercase text-white">Resultado</h2>
    <!-- Icon Divider-->
    <div class="divider-custom divider-light">
      <div class="divider-custom-line"></div>
      <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
      <div class="divider-custom-line"></div>
    </div>
    <!-- About Section Content-->
    <div class="row">
      <div class="col-lg-12 ml-auto text-center">
        <p class="lead">Los costes de comienzo de tu empresa son: {{costsResult}}</p>
      </div>

    </div>
    <!-- About Section Button-->
    <div class="text-center mt-4">
      <div class="btn btn-xl btn-outline-light" (click)="calcAgain()">
        Volver a calcular
      </div>
    </div>
  </div>
</section>


<!-- Modal addInvestmentModal -->
<div class="modal fade" id="addInvestmentModal" tabindex="-1" role="dialog"
  aria-labelledby="addInvestmentModal" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addInvestmentModal">Añadir Inversión</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <label for="investmentName">Nombre</label>
        <input type="text" class="form-control" [(ngModel)]="investmentName" id="investmentName">

        <button class="btn btn-primary top-30" data-dismiss="modal" (click)="addInvestment()">
          Añadir
        </button>

      </div>
    </div>
  </div>
</div>

<!-- Modal addCostModal -->
<div class="modal fade" id="addCostModal" tabindex="-1" role="dialog" aria-labelledby="addCostModal"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addCostModal">Añadir Coste</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <label for="costName">Nombre</label>
        <input type="text" class="form-control" [(ngModel)]="costName" id="costName">

        <label for="costAmount">Coste</label>
        <input type="number" class="form-control" [(ngModel)]="costAmount" id="costAmount">

        <button class="btn btn-primary top-30" data-dismiss="modal" (click)="addCost()">
          Añadir
        </button>

      </div>
    </div>
  </div>
</div>

<!-- Modal loadExampleModal -->
<div class="modal fade" id="loadExampleModal" tabindex="-1" role="dialog"
  aria-labelledby="loadExampleModal" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="loadExampleModal">Cargar Ejemplo</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <button class="btn btn-primary top-30" data-dismiss="modal"
          (click)="loadExample('restaurante')">
          Restaurante
        </button>

      </div>
    </div>
  </div>
</div>